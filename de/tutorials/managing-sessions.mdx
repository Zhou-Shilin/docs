---
title: "Sessions verwalten"
description: "Fortgeschrittener Session-Workflow, Verlaufsprüfung, Speicherlayout und Recovery-Playbook."
---

## Warum Session-Disziplin wichtig ist

Sessions sind MineClawds Langzeitgedächtnis. Ein sauberer Session-Workflow gibt dir bessere Antworten, weniger Kontextfehler und schnellere Wiederherstellung, wenn etwas kaputtgeht.

## Wie Sessions abgegrenzt sind

- Sessions sind nach Owner-Key isoliert.
- Spielerbefehle nutzen die Spieler-UUID als Owner-Key.
- Konsolenbefehle nutzen den Namen der Befehlsquelle als Owner-Key.
- Jeder Owner hat einen aktiven Session-Zeiger.
- Alle Session-Befehle benötigen OP-Berechtigungsstufe `2`.

## Täglicher Befehls-Workflow

| Ziel | Befehl |
| --- | --- |
| Sauberen Kontext starten | `/mineclawd sessions new` |
| Alle gespeicherten Sessions sehen | `/mineclawd sessions list` |
| Aktiven Kontext wechseln | `/mineclawd sessions resume <session>` |
| Veralteten Kontext entfernen | `/mineclawd sessions remove <session>` |
| Aktuellen Chatverlauf lesen | `/mineclawd history` |
| Fehlerhafte Vertex-Turns reparieren | `/mineclawd sessions repair [session]` |

`<session>` akzeptiert entweder eine kurze ID wie `1a2b` oder ein Token wie `1a2b-my-build-plan`.

<Tip>
Bevorzuge die kurze Session-ID für Notizen, Skripte und Runbooks. Die ID ist stabil. Der Titelteil des Tokens kann sich ändern, nachdem MineClawd einen besseren Titel erzeugt.
</Tip>

## Best Practices für lange Aufgaben

1. Nutze eine Session pro Ziel, nicht eine Session für alles.
2. Benenne den Kontext neu, indem du frische Sessions startest, statt alten Verlauf endlos mitzuschleppen.
3. Führe vor `resume`, `remove` oder `repair` `/mineclawd sessions list` aus.
4. Vermeide Session-Änderungen, solange noch eine Anfrage läuft.
5. Prüfe den Kontext mit `/mineclawd history` vor destruktiven Aufgaben.

## `/mineclawd history` richtig nutzen

- Das Verlauf-Buch zeigt Session-Token, Aktualisierungszeit und sichtbare Chat-Turns.
- Der Befehl funktioniert nur für Spieler, nicht für die Konsole.
- Die Verlauf-Buch-UI erfordert MineClawd auf dem Client.
- Sehr langer Verlauf wird auf Minecraft-Buchseitenlimits gekürzt.

Wenn dein Client MineClawd nicht installiert hat, nutze `sessions list` plus aktuelle Chat-Logs als Fallback-Kontrollpunkt für den Kontext.

## Recovery-Playbook

### Anfrage fehlgeschlagen, aber Kontext soll bleiben

Nutze `/mineclawd retry <token>` aus der neuesten Fehlermeldung. Retry-Tokens laufen nach 30 Minuten ab.

### Vertex-Function-Call-Mismatch-Fehler

Ausführen:

```bash
/mineclawd sessions repair
```

Oder eine bestimmte Session angeben:

```bash
/mineclawd sessions repair <session>
```

`repair` normalisiert fehlerhafte Vertex-Function-Call-Turns und speichert die reparierte Session.

## Speicherorte der Session-Dateien

MineClawd speichert Sessions unter deinem Spielverzeichnis:

```text
mineclawd/
  sessions/
    <owner>/
      active.json
      <id>.json
```

- `active.json` speichert die aktive Session-ID.
- `<id>.json` speichert Metadaten und beide Provider-Verläufe (`openAiHistory`, `vertexHistory`).
- Wenn du die aktive Session entfernst, wählt MineClawd automatisch die zuletzt aktualisierte verbleibende Session. Wenn keine übrig bleibt, wird die aktive Session gelöscht.

## Backup- und Bereinigungsstrategie

1. Sichere `mineclawd/sessions/`, bevor du eine Massenbereinigung machst.
2. Entferne veraltete Sessions mit `/mineclawd sessions remove <session>`.
3. Behalte pro Operator eine bekannte, funktionierende Session für schnelles Rollback.
4. Nutze `/resources/technical-details`, wenn du Speicher-Interna prüfen musst.

## Verwandte Seiten

- [/commands/sessions-list](/commands/sessions-list)
- [/commands/sessions-resume](/commands/sessions-resume)
- [/commands/sessions-repair](/commands/sessions-repair)
- [/commands/history](/commands/history)

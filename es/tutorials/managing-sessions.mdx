---
title: "Gestionar sesiones"
description: "Flujo avanzado de sesiones, historia, estructura de almacenamiento y guía de recuperación."
---

## Por qué importa la disciplina de sesiones

Las sesiones son la memoria a largo plazo de MineClawd. Un flujo limpio de sesiones te da mejores respuestas, menos errores de contexto y una recuperación más rápida cuando algo falla.

## Cómo se delimitan las sesiones

- Las sesiones están aisladas por clave de propietario.
- Los comandos de jugador usan el UUID del jugador como clave de propietario.
- Los comandos de consola usan el nombre del origen del comando como clave de propietario.
- Cada propietario tiene un puntero de sesión activa.
- Todos los comandos de sesión requieren nivel de permiso OP `2`.

## Flujo diario de comandos

| Objetivo | Comando | Alternativa en GUI |
| --- | --- | --- |
| Empezar con contexto limpio | `/mineclawd sessions new` | Haz clic en **New Session** en la vista de sesiones |
| Ver todas las sesiones guardadas | `/mineclawd sessions list` | Abre **Sessions** desde el menú de la superposición |
| Cambiar el contexto activo | `/mineclawd sessions resume <session>` | Haz clic en una fila de sesión en la vista de sesiones |
| Eliminar contexto obsoleto | `/mineclawd sessions remove <session>` | -- |
| Leer el historial actual del chat | `/mineclawd history` | Desplázate por la conversación de la superposición |
| Reparar turnos de Vertex mal formados | `/mineclawd sessions repair [session]` | -- |

`<session>` acepta un id corto como `1a2b` o un token como `1a2b-my-build-plan`.

<Tip>
Prefiere el id corto de sesión para notas, scripts y runbooks. El id es estable. La parte de título del token puede cambiar cuando MineClawd genera un título mejor.
</Tip>

## Mejores prácticas para tareas largas

1. Usa una sesión por objetivo, no una sesión para todo.
2. Renueva el contexto iniciando sesiones nuevas en lugar de arrastrar historial viejo.
3. Ejecuta `/mineclawd sessions list` antes de `resume`, `remove` o `repair`.
4. Evita modificar sesiones mientras una solicitud sigue en ejecución.
5. Revisa el contexto con `/mineclawd history` antes de tareas destructivas.

## Cómo usar bien `/mineclawd history`

- El libro de historial muestra token de sesión, hora de actualización y los turnos visibles del chat.
- El comando solo funciona para jugadores, no para consola.
- La interfaz del libro requiere MineClawd en el cliente.
- Los historiales muy largos se recortan a los límites de páginas del libro de Minecraft.

Si tu cliente no tiene MineClawd, usa `sessions list` y logs recientes de chat como verificación alternativa de contexto.

## Guía de recuperación

### La solicitud falló pero el contexto debe mantenerse

Usa `/mineclawd retry <token>` desde el último mensaje de fallo. Los tokens de reintento vencen después de 30 minutos.

### Errores de desajuste de function-call de Vertex

Ejecuta:

```bash
/mineclawd sessions repair
```

O apunta a una sesión específica:

```bash
/mineclawd sessions repair <session>
```

`repair` normaliza turnos mal formados de Vertex y guarda la sesión corregida.

## Ubicación de archivos de sesión

MineClawd guarda las sesiones dentro de tu directorio de juego:

```text
mineclawd/
  sessions/
    <owner>/
      active.json
      <id>.json
```

- `active.json` almacena el id de sesión activa.
- `<id>.json` contiene metadatos y los historiales de ambos proveedores (`openAiHistory`, `vertexHistory`).
- Si eliminas la sesión activa, MineClawd selecciona automáticamente la sesión restante más reciente. Si no queda ninguna, se limpia la sesión activa.

## Estrategia de respaldo y limpieza

1. Haz copia de seguridad de `mineclawd/sessions/` antes de hacer limpiezas masivas.
2. Elimina sesiones obsoletas con `/mineclawd sessions remove <session>`.
3. Mantén una sesión conocida como estable por operador para rollback rápido.
4. Usa `/resources/technical-details` cuando necesites inspeccionar los internals de almacenamiento.

## Páginas relacionadas

- [Uso de la GUI](/tutorials/using-the-gui)
- [/commands/sessions-list](/commands/sessions-list)
- [/commands/sessions-resume](/commands/sessions-resume)
- [/commands/sessions-repair](/commands/sessions-repair)
- [/commands/history](/commands/history)

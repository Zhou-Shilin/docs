---
title: "マルチプレイでの運用"
description: "専用サーバーで MineClawd を動かす際の権限、視認性、導入手順。"
---

## デプロイモデル

- サーバーに MineClawd を導入すると `/mineclawd` と `/mclawd` が使えるようになります。
- コマンドのコア部分はサーバー側だけで動き、クライアント導入は任意です。
- クライアント側が MineClawd 未導入でも次の機能は使えます:
  - `/mineclawd config` の GUI パケット
  - `/mineclawd history` のブック UI
  - `ask-user-question` のポップアップ
  - オーバーレイ GUI（AssistiveTouch オーブ、ストリーミング、セッション/アセット管理）

<Info>
クライアントに MineClawd が入っていなくても、チャット上で `choose` を使うフォールバック機能があります。つまりオーバーレイがなくてもチャットだけで同じコマンドが動きます。
</Info>

## 権限と管理

- MineClawd のルートコマンドはバニラの権限レベル `2`（`source.hasPermissionLevel(2)`）でガードされています。
- サブコマンドごとのカスタム権限ノードは存在しません。
- 実務的には信頼できるオペレーターにのみ OP を与えてください。

サーバースタックがコマンドレベルの権限再マッピング機能を持つなら、`/mineclawd` と `/mclawd` を AI オペレーター用ロールにだけ公開してください。

## 忙しいサーバーのための表示制御

MineClawd にはプレイヤーごとの視認性設定があります:

```bash
/mineclawd config broadcast-requests-to <self|all|ops>
```

- `self`: リクエストエコーとタスク通知は要求者のみが見ます。
- `all`: 全員が見ることになります。
- `ops`: OP のみが見ます。

この設定は `mineclawd/player-settings.json` にプレイヤー単位で保存されます。GUI 設定画面の「Misc」セクションにも「Broadcast requests to」として存在します。

## マルチプレイにおけるセッション所有

- セッションデータはオーナーキーごとに隔離されます。
- プレイヤーコマンドはそのプレイヤーのセッションセットを操作します。
- コンソールコマンドは別のオーナーネームスペースを使います。

チーム運用では、各オペレーターが個人セッションを持つか、ひとつの共有アカウントを使うかを早めに決めてください。

## 専用サーバーでの動的レジストリ

初期設定では `dynamic-registry-mode` は `AUTO` です。このモードは専用サーバーでは動的プレースホルダーを無効にします。

強制的に有効にするには:

```bash
/mineclawd config dynamic-registry-mode enabled
```

変更後はサーバーを再起動してください。

### 有効化すると何が変わるか

- ランタイムでアイテム/ブロック/流体の動的スロットが使えるようになります。
- クライアントに動的状態の同期が送信されます。
- 永続ワールド状態で動的スロットデータが保存されます。
- クライアントにも MineClawd の導入が必要になります。

<Warning>
動的レジストリを本番に有効化する前に少人数テストを行ってください。クライアントの導入要件がすべてのプレイヤーにとって重要な互換性変更になります。
</Warning>

## オペレーター向け推奨ベースライン

| 目的 | 推奨設定 |
| --- | --- |
| チャットノイズを減らす | `broadcast-requests-to ops` |
| 長期ツールループを防ぐ | `limit-tool-calls true` |
| ループの上限を定める | `tool-call-limit 8` 〜 `12` |
| インシデント調査中 | `debug-mode true`（一時的に） |

## サーバーオーナー向け導入チェックリスト

1. オペレーターのロールと OP ポリシーを決める。
2. プロバイダーとモデルの資格情報を設定する。
3. ブロードキャストポリシー（`self`、`ops`、`all`）を決める。
4. 動的レジストリを `auto` にするか `enabled` に切り替えるか判断する。
5. オペレーターと非オペレーターの実アカウントでテストする。

## 関連ページ

- [/commands/overview](/commands/overview)
- [/commands/config](/commands/config)
- [/configuration/complete-config](/configuration/complete-config)
- [/resources/troubleshooting](/resources/troubleshooting)
